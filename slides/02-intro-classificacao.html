<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introdução ao Machine Learning</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="static/css/xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introdução ao Machine Learning
## Dataprep e Classificação
### <img src = 'https://d33wubrfki0l68.cloudfront.net/9b0699f18268059bdd2e5c21538a29eade7cbd2b/67e5c/img/logo/cursor1-5.png' width = '40%'>
### September de 2021

---





class: middle, center, inverse

# Dataprep Parte I

---

# Conteúdo

- Preditores categóricos

- Transformações 1:1

- Transformações 1:n

- Regressão Logística

- Matriz de Confusão

- Métricas de Classificação

- Curva ROC

- Múltiplas Notas de Corte



---

## Preditores Categóricos

### Preditor com apenas 2 categorias

Saldo médio no cartão de crédito é diferente entre homens e mulheres?

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-1-1.png" style="display: block; margin: auto;" /&gt;


$$
y_i = \beta_0 + \beta_1x_i \space\space\space\space\space\space \text{em que}\space\space\space\space\space\space x_i = \Bigg\\{\begin{array}{ll}1&amp;\text{se o i-ésimo carro for }\texttt{manual}\\\\
0&amp;\text{se o i-ésimo carro for } \texttt{automático}\end{array}
$$


.footnote[
Ver [ISL](https://www.ime.unicamp.br/~dias/Intoduction%20to%20Statistical%20Learning.pdf) página 84 (Predictors with Only Two Levels).
]



---

## Preditores Categóricos

### Preditor com 3 ou mais categorias

.pull-left[

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

Exemplo: Modelo linear

`$$y_i = \beta_0 + \beta_1x_{1i} + \beta_2x_{2i}$$`

Em que


`\(x_{1i} = \Bigg \{ \begin{array}{ll} 1 &amp; \text{se for }\texttt{Multi_Family}\\0&amp;\text{caso contrário}\end{array}\)`

`\(x_{2i} = \Bigg \{ \begin{array}{ll} 1 &amp; \text{se for }\texttt{Residential}\\0&amp;\text{caso contrário}\end{array}\)`

]


---

## Preditores Categóricos

### Preditor com 3 ou mais categorias

"One hot enconding" ou "Dummies" ou "Indicadores".

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; type &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; (Intercept) &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; typeMulti_Family &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; typeResidential &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Condo &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Multi_Family &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Condo &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Multi_Family &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Residential &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Residential &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

steps: `step_dummy()`

---

## Preditores Categóricos

### Preditor com 3 ou mais categorias

As previsões para cada categoria ficaria assim:

`\(y_{i} = \left\{ \begin{array}{ll} \beta_0 &amp; \text{se for }\texttt{Condo}\\ \beta_0 + \beta_1&amp;\text{se for } \texttt{Multi_Family}\\ \beta_0 + \beta_2&amp;\text{se for } \texttt{Residential}\end{array}\right.\)`


---

## Transformações Não Lineares dos Preditores

### Exemplo: log



&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;


---

## Transformações Não Lineares dos Preditores

### Exemplo: log

.pull-left[


&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

]

.pull-right[

Relação real entre `x` e `y`: `\(y = 10 + 0.5log(x)\)` 

Modelos propostos: 

  1) `y ~ x` 
  
  2) `y ~ log(x)`
]


Outras transformações comuns: raíz quadrada, Box-Cox.

steps: `step_log()`, `step_BoxCox()`, `step_sqrt()`

---

## Transformações Não Lineares dos Preditores

#### Exemplo: Regressão Polinomial

.pull-left[
Relação real: `\(y = 500 + 0.4(x-10)^3\)` 
]

Modelo proposto: `\(y = \beta_0 + \beta_1x + \beta_2x^2 + \beta_3x^3\)` 


&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

Outras expansões comuns: b-splines, natural splines.

steps: `step_poly()`, `step_bs()`, `step_ns`


---

## Transformações Não Lineares dos Preditores

#### Exemplo: Regressão Polinomial

.pull-left[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; y &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; idade &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; idade2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; idade3 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 456.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 149.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 492.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 412.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 548.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 131.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1503.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 758.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 329.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5993.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 444.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65.6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 748.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 322.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5800.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 820.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6744.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 517.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 174.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2308.3 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]


.pull-right[

Outras expansões comuns: b-splines, natural splines.

steps: `step_poly()`, `step_bs()`, `step_ns`

]

---

## Interações

Interação entre duas variáveis explicativas: `species` e `bill_length_mm`

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-9-1.png" height="330" style="display: block; margin: auto;" /&gt;



---

## Interações

Modelo proposto (Matemático): Seja `y = flipper_length_mm` e `x = bill_length_mm`,

`$$\small \begin{array}{l} y = \beta_0 + \beta_1x\end{array}$$`



&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-10-1.png" height="260" style="display: block; margin: auto;" /&gt;


Modelo proposto (em R): `Sepal.Width ~ Sepal.Length`

---

## Interações

Modelo proposto (Matemático): Seja `y = Sepal.Width` e `x = Sepal.Length`,

`$$\small \begin{array}{l} y = \beta_0 + \beta_1x + \beta_2I_{versicolor} + \beta_3I_{virginica}\end{array}$$`


&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-11-1.png" height="260" style="display: block; margin: auto;" /&gt;


Modelo proposto (em R): `Sepal.Width ~ Sepal.Length + Species`


---

## Interações

Modelo proposto (Matemático): Seja `y = Sepal.Width` e `x = Sepal.Length`,

`$$\small \begin{array}{l} y = \beta_0 + \beta_1x + \beta_2I_{versicolor} + \beta_3I_{virginica} + \beta_4\color{red}{xI_{versicolor}} + \beta_5\color{red}{xI_{virginica}}\end{array}$$`


&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-12-1.png" height="260" style="display: block; margin: auto;" /&gt;


Modelo proposto (em R): `step_interact(~flipper_length_mm:starts_with("species_"))`.

---
class: middle, center

## Exemplo 04

---

## Outras referências

- Transformações recomendadas p/ cada modelo: https://www.tmwr.org/pre-proc-table.html

- Lista de transformações do recipes: https://recipes.tidymodels.org/reference/index.html

- Embbed: p/ quando o preditor tem muitas categorias: https://embed.tidymodels.org/ 

- Textos: quando colunas tem textos https://github.com/tidymodels/textrecipes

- Séries temporais: https://business-science.github.io/timetk/reference/index.html#section-feature-engineering-operations-recipe-steps-

---
exclude: false

---

class: middle, center, inverse

# Classificação

---

# Regressão Logística


.pull-left[

### Para  `\(Y \in \{0, 1\}\)` (binário)

$$
log\left\(\frac{p}{1-p}\right\) = \beta_0 + \beta_1x
$$

Ou...

$$
p = \frac{1}{1 + e^{-(\beta_0 + \beta_1x)}}
$$



```r
### No R:
logistic_reg() %&gt;%
  fit(spam ~ exclamacoes, data = dt_spam)
```

]


.pull-right[

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-14-1.png" width="400" style="display: block; margin: auto;" /&gt;



.footnote[
Ver [ISL](https://www.ime.unicamp.br/~dias/Intoduction%20to%20Statistical%20Learning.pdf) página 131 (Logistic Regression).
]


]




---

# Regressão Logística

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;


---

# Regressão Logística

<div id="htmlwidget-bb5dbd9a10cdaf503e73" style="width:576px;height:432px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-bb5dbd9a10cdaf503e73">{"x":{"visdat":{"b83138392e95":["function () ","plotlyVisDat"]},"cur_data":"b83138392e95","attrs":{"b83138392e95":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"color":{},"type":"scatter3d","mode":"markers","opacity":0.8,"inherit":true},"b83138392e95.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":[[0.997197197571356,0.996574361029644,0.995813699282318,0.994884999818742,0.993751568079215,0.992368905911131,0.990683154715481,0.988629278614756,0.986128969953463,0.983088273148812,0.979394946632657,0.97491562072242,0.969492867181979,0.962942380267185,0.95505058545015,0.945573145122201,0.934235019329892,0.920732951893915,0.904741456915993,0.885923517960796,0.863947186143763,0.838508942842767,0.809363932465874,0.776361864471894,0.739485555281711,0.698886992827481],[0.99634439716642,0.995532900925593,0.994542249858377,0.993333377164674,0.991858935192382,0.990061656841293,0.987872450225226,0.985208212468013,0.981969365050815,0.97803714097637,0.973270697887959,0.967504196950361,0.960544081174746,0.952166914855776,0.942118310955005,0.930113671708744,0.915841682158298,0.898971687312411,0.879166180385972,0.856099523844602,0.829483577479179,0.799099978113668,0.764837328151875,0.726729594445378,0.684989954946836,0.640032828652043],[0.995233358024793,0.994176667072368,0.992887398167564,0.991315182410314,0.989399144395613,0.987065906828702,0.98422731278283,0.980777875594604,0.976591998859776,0.971521059248775,0.965390518957753,0.957997338964015,0.949108104181507,0.9384584484788,0.925754573909434,0.910677870993883,0.892893816878735,0.872066373000165,0.847878903662214,0.820062047207214,0.788427863747004,0.752907923350523,0.713590953053653,0.670753692125612,0.624877467760432,0.576643556034668],[0.993786749018682,0.992411812295775,0.990735450872463,0.988692971753892,0.986206473174087,0.983182476265909,0.979509293821797,0.975054192663789,0.969660463421431,0.963144594723813,0.955293864223015,0.945864810914316,0.934583241064377,0.921146632006118,0.905230003593027,0.886496467424972,0.864613644168527,0.839276829107427,0.810239040003203,0.777346791060462,0.740578620733075,0.700081314163373,0.656196967874981,0.609473365081613,0.560651378897069,0.510626661449049],[0.991904685534114,0.990117406713036,0.987940331027964,0.985290783605813,0.982069687127942,0.978158855233692,0.973418109002463,0.967682354111663,0.960758849259057,0.952425023398505,0.94242736346264,0.930482091906796,0.916278567791277,0.899486537595746,0.879768462660963,0.856798051958483,0.830285693065782,0.800010559759469,0.76585770279875,0.727856484498417,0.686214648907743,0.641340790109185,0.59384784903001,0.544532256202645,0.494327560415421,0.444236998882634],[0.989458571110415,0.987138243271998,0.984315272353966,0.980884698043965,0.976721531220355,0.971677838764448,0.965579852025138,0.958225366690772,0.949381840699469,0.93878577268917,0.92614414926892,0.911138962235575,0.893435969003697,0.872698919328768,0.848610280030823,0.820898912668233,0.789374067169186,0.753963408864729,0.71475075689992,0.672007231698772,0.626208336379631,0.578029991745452,0.528319284978978,0.478040507574997,0.42820278611713,0.379780371748244],[0.986283549375306,0.983276163571513,0.979623019646881,0.975192018580769,0.969827167596678,0.963345747747216,0.955535887604295,0.946155002714522,0.934929747408276,0.921558337126858,0.905716305798599,0.887066906075975,0.865277346618829,0.840041760627625,0.81111106791282,0.778328618457756,0.741668702072126,0.70127292318823,0.657477627951011,0.610824847945311,0.562050411148162,0.512046348978192,0.461800012546593,0.412317947864768,0.36454661223409,0.319302879879023],[0.9821694611507,0.978279909951857,0.973564729231327,0.967859566979514,0.960972495807474,0.952681808394576,0.942734866122238,0.930848714298997,0.916713391697786,0.899999056012626,0.880368151424942,0.857493753682652,0.83108480383773,0.800918042409556,0.766874999516704,0.72898046057355,0.687436754135014,0.642646652534457,0.595217492818866,0.545941047183953,0.495747838225464,0.445640191113577,0.396613647116759,0.349579494603408,0.305300866987038,0.264351236054495],[0.976850363781619,0.971833780215191,0.965768186062515,0.958452210169231,0.949654182950244,0.939111468899183,0.92653184270061,0.911597904323981,0.893975702714411,0.873328792423241,0.849338764874406,0.821732732072573,0.790317164345227,0.755015852776757,0.71590773394762,0.673258323529457,0.62753729770717,0.579415198676639,0.529734915467672,0.479458359521764,0.429594480635006,0.381119585692433,0.334903017949546,0.291649789057711,0.251867319633947,0.21585773359826],[0.969992984141796,0.963545844451529,0.955776661410012,0.946443727019846,0.935274545454211,0.921968074768234,0.906200371169245,0.88763484123541,0.86593829990316,0.840803742149582,0.811980018421758,0.779307345496192,0.742755793979757,0.702461809963318,0.658755998374814,0.61217462990618,0.563448457291218,0.513465842184573,0.463212443052727,0.413695367513637,0.365863795861761,0.320539049442952,0.278364517796844,0.239780792274127,0.205025659942645,0.174154092225248],[0.961185026160777,0.95293727588552,0.943040825636926,0.931213546138307,0.917146161469061,0.900509250153221,0.880965253776968,0.858186634975665,0.831880913822221,0.801822427284683,0.767889215865915,0.730101515887568,0.688656259165053,0.643950399950035,0.596585655472606,0.547349102908038,0.497168184663099,0.447044250375148,0.397974131357215,0.350872459380845,0.30650723740539,0.26545762774972,0.228097432319399,0.194602257471101,0.164974480481325,0.139078536345634],[0.94992513719695,0.939435544006557,0.926917661595831,0.912054704894054,0.894513025503342,0.873955999091829,0.85006436361816,0.822563508635761,0.791257155398778,0.756065251301493,0.717061875912791,0.674506954645912,0.628864334436135,0.580799156132857,0.531150067713564,0.480876542463878,0.430987289010235,0.382460609971434,0.33616975596653,0.29282495528472,0.25293942716202,0.21682098436632,0.184585732902065,0.156187214920186,0.13145346194078,0.110125355206927],[0.935617642279915,0.922375852433924,0.906682207343288,0.88820028024122,0.866596510465412,0.841562778477846,0.812845893840351,0.780282971115313,0.743839891262233,0.703647964682934,0.660032064703022,0.613522692428129,0.564845495827143,0.514885118201464,0.464625464118839,0.415074138670389,0.367182988714728,0.321777742465865,0.279507275571357,0.240818012542557,0.205953269018532,0.174972769387287,0.147785161211049,0.124186134552889,0.103896093550481,0.0865933556268597],[0.917576884690779,0.901017127613706,0.881559776838128,0.85887670183854,0.832674027112767,0.802723715696939,0.768900349520451,0.731219643786506,0.689873152666747,0.645252016497974,0.597952317345445,0.548756401241419,0.498588576806544,0.44844915478797,0.399336193793282,0.352167617053457,0.307716263213678,0.266566972112384,0.22909934418548,0.195494304406647,0.165758666656422,0.139760231702461,0.117266332343716,0.0979803944399665,0.0815731672498703,0.0677071698623643],[0.89504794487365,0.874580546170969,0.850787081737179,0.823391245647763,0.792194040552615,0.757111600773721,0.718213174643311,0.675753112206633,0.630189429371739,0.582181843496346,0.532564719129271,0.482295033619064,0.432381190072958,0.383803426569779,0.337438854410201,0.294002891343823,0.254014548785775,0.217787339729241,0.185442436556447,0.1569374821376,0.132103517781506,0.110683381212716,0.0923668077486315,0.0768195434615386,0.0637055300070288,0.0527024315133289],[0.867251984784279,0.842318874474602,0.813708696561527,0.781255494361174,0.744920988850796,0.704831377674386,0.661305812618528,0.614869017077699,0.566241505320322,0.516304154176146,0.46603905329422,0.416454241038295,0.368504174052583,0.323018946628122,0.280652900150187,0.241858292103534,0.206883982744849,0.175794475835935,0.148502170997297,0.124805416527309,0.104426258825134,0.0870438042029807,0.0723211206627022,0.0599251937829756,0.0495404803482601,0.0408771294572566],[0.833464147868495,0.803621909049061,0.769908398267708,0.732334837745362,0.691087423441586,0.646551486440798,0.599317458883074,0.550162920098855,0.500008991731062,0.449854882419024,0.400699815150019,0.353464952247026,0.308927933610063,0.26767926300091,0.230104345021874,0.19638944334828,0.166545836908741,0.140444723315679,0.117855750701539,0.0984836904414585,0.0819998457774945,0.0680666957785229,0.0563556833435774,0.0465589107036522,0.0383958962822155,0.0316166160964374],[0.793127820127977,0.758154897647632,0.719361622118734,0.676996783500639,0.63151256543207,0.583563240228137,0.533978847159558,0.483713810185193,0.433776162584785,0.385148017365877,0.338710299343082,0.29518358795937,0.255092679807385,0.218756799047531,0.18630220791031,0.157690679855315,0.132756296889281,0.111243881358567,0.0928442364317717,0.0772234482302767,0.0640452668812178,0.0529868104256656,0.0437485257645035,0.0360596110266991,0.0296800995815401,0.0244006542286796],[0.745999081801267,0.706012039397944,0.662577227930908,0.616213585524953,0.567636464399903,0.517722927271374,0.467453188091758,0.4178356542384,0.369827335019897,0.324262649478853,0.281801383774014,0.242901627647076,0.207817801636523,0.176619215079313,0.1492220503819,0.12542734442336,0.104958812577025,0.0874963715039934,0.07270323611459,0.0602460676198067,0.0498086946761207,0.041100468271249,0.0338604766510464,0.0278587823706655,0.022895665347392,0.0187996421145299],[0.692299060423759,0.647848794162076,0.600681060623685,0.551568637444712,0.501429406510447,0.451261411282986,0.402064976057957,0.354764449465186,0.310142237659843,0.268794494145684,0.231112432839507,0.197287675876818,0.167335995525721,0.141132017309413,0.118447734134845,0.098989288010584,0.0824285557968979,0.0684279906595021,0.0566585959341657,0.0468117777216465,0.0386062241526186,0.0317910356593159,0.0261462185443107,0.02148145760981,0.0176338695156192,0.0144652432879473],[0.632833725648825,0.58494332586921,0.535392429282764,0.485132849341743,0.435172185240052,0.386494364132873,0.339984076700224,0.296367035722862,0.256173815405269,0.219729361577061,0.18716504951862,0.158446813048033,0.133411805810207,0.111806863028425,0.0933238791276337,0.0776292980882331,0.0643866909545033,0.0532726375339649,0.0439868334259793,0.0362576235699811,0.0298441651933272,0.02453627409235,0.0201528002935516,0.0165391683727382,0.0135645326292811,0.0111188484257278],[0.569030351761062,0.519141414666852,0.468867845989358,0.419218357810664,0.371152454646924,0.325508838436187,0.282952718552217,0.243948015744786,0.208754726111353,0.177446990553223,0.149944804937154,0.126051925131859,0.1054937623293,0.0879510651571516,0.0730872114469639,0.0605685489000287,0.0500782846178478,0.0413249747571475,0.0340468397157017,0.0280130707666628,0.0230231178197657,0.0189047345532664,0.0155113526388679,0.0127191829075117,0.0104243045105458,0.00853990156392484],[0.502849798218504,0.452668719343586,0.403431657054112,0.356066093089969,0.311359164295527,0.269912659148734,0.232123605537112,0.198189003483813,0.168129146730584,0.141822119767198,0.119042289806977,0.0994971947543059,0.0828593048819309,0.0687910617184841,0.056963038400432,0.0470659502961777,0.0388176576630112,0.0319663856805951,0.0262912788723795,0.0216012117016279,0.0177325629082968,0.0145464650865867,0.0119258789549021,0.00977271683975849,0.00800514864528494,0.00655515999200087],[0.436569236667077,0.387842448539514,0.341260172289594,0.297553225092888,0.257257950633671,0.220705026468437,0.188030963855155,0.159205886634175,0.134070051056758,0.112372333591301,0.0938057434770677,0.078037100521679,0.0647298092746322,0.0535599192800632,0.0442263791633208,0.0364566823271433,0.0300091096783768,0.0246726286740295,0.0202653008315894,0.0166318386622868,0.0136407669715031,0.0111814935253796,0.00916148062460032,0.00750362754520152,0.00614391778936467,0.00502934840033476],[0.372479515850318,0.326757500787486,0.284106896462683,0.244997452849348,0.209694756489334,0.178277805620433,0.15067044018677,0.126679165516533,0.106031115595259,0.0884078927925857,0.0734730540289337,0.0608926444886151,0.0503492563985588,0.041550654444092,0.0342341921499694,0.0281681888885206,0.0231512629668489,0.0190104030901513,0.015598355334859,0.0127907278842805,0.0104830779387547,0.00858814271724541,0.00703330387924214,0.00575832558988529,0.00471337482056773,0.0038573133062526],[0.312578702316924,0.271033751483425,0.233137860900655,0.19909342757086,0.16892529468163,0.14251503673136,0.119639424860267,0.100007418274347,0.0832921006125248,0.0691559161821281,0.0572690174105567,0.047321434429949,0.0390302021148005,0.0321426707726361,0.0264371221534362,0.0217216185747189,0.0178317986424822,0.0146281361733928,0.0119930158295626,0.00982785302688467,0.00805039355424113,0.0065922640612815,0.00539680174308447,0.00441716445054302,0.00361470643057517,0.0029575963866333]],"x":[0.0144823438022286,0.0525416156277061,0.0906008874531835,0.128660159278661,0.166719431104139,0.204778702929616,0.242837974755093,0.280897246580571,0.318956518406048,0.357015790231526,0.395075062057003,0.433134333882481,0.471193605707958,0.509252877533436,0.547312149358913,0.585371421184391,0.623430693009868,0.661489964835346,0.699549236660823,0.737608508486301,0.775667780311778,0.813727052137256,0.851786323962733,0.889845595788211,0.927904867613688,0.965964139439166],"y":[0.0227246168069541,0.0613890595827252,0.100053502358496,0.138717945134267,0.177382387910038,0.216046830685809,0.25471127346158,0.293375716237351,0.332040159013122,0.370704601788893,0.409369044564664,0.448033487340435,0.486697930116206,0.525362372891977,0.564026815667748,0.60269125844352,0.641355701219291,0.680020143995061,0.718684586770833,0.757349029546604,0.796013472322375,0.834677915098146,0.873342357873917,0.912006800649688,0.950671243425459,0.98933568620123],"type":"surface","opacity":0.9,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"tempo_de_relacionamento"},"yaxis":{"title":"idade"},"zaxis":{"title":"churn"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.200214452575892,0.685218595666811,0.91687577450648,0.284399457275867,0.104650127934292,0.701057459227741,0.527959984261543,0.807935200864449,0.9565001251176,0.110453018685803,0.273284949595109,0.490513201802969,0.318404018646106,0.559172826586291,0.262593138730153,0.201875211205333,0.387525747064501,0.887869771569967,0.55492255394347,0.842179385246709,0.890207114629447,0.720700970385224,0.211340273730457,0.225717290770262,0.139983697095886,0.479913854040205,0.437411859631538,0.965964139439166,0.141913911094889,0.954978888388723,0.444730556104332,0.0593624736648053,0.275149184744805,0.0311482592951506,0.0144823438022286,0.487169028958306,0.595151623012498,0.597853036830202,0.397680514957756,0.396830396959558],"y":[0.816076069371775,0.235198754351586,0.826870246091858,0.533475931501016,0.928942713653669,0.549794725608081,0.760142526822165,0.0685097624082118,0.793609339045361,0.63280342775397,0.384576936485246,0.566272675059736,0.921990567352623,0.9758776135277,0.933033839333802,0.381162660429254,0.25556407077238,0.257483700523153,0.196886381134391,0.136400904972106,0.623966502491385,0.173745283158496,0.866434578550979,0.98933568620123,0.986635761801153,0.892013083212078,0.888217610539868,0.157343514729291,0.930459470953792,0.826930246781558,0.829343417659402,0.717340295435861,0.156359620392323,0.835461407201365,0.0227246168069541,0.919127090135589,0.0390189492609352,0.700119586894289,0.443299840670079,0.313868451630697],"z":[1,0,0,1,0,0,1,0,0,1,1,0,0,0,0,1,1,0,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,1,0,1,1],"type":"scatter3d","mode":"markers","opacity":0.8,"marker":{"colorbar":{"title":"tempo_de_relacionamentoidade","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,1,0,1,0,0,0,1,0,1,1,0,0,0,0,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,1,1],"line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,1,0,1,0,0,0,1,0,1,1,0,0,0,0,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,1,1]}},"frame":null},{"colorbar":{"title":"tempo_de_relacionamentoidade","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"z":[[0.997197197571356,0.996574361029644,0.995813699282318,0.994884999818742,0.993751568079215,0.992368905911131,0.990683154715481,0.988629278614756,0.986128969953463,0.983088273148812,0.979394946632657,0.97491562072242,0.969492867181979,0.962942380267185,0.95505058545015,0.945573145122201,0.934235019329892,0.920732951893915,0.904741456915993,0.885923517960796,0.863947186143763,0.838508942842767,0.809363932465874,0.776361864471894,0.739485555281711,0.698886992827481],[0.99634439716642,0.995532900925593,0.994542249858377,0.993333377164674,0.991858935192382,0.990061656841293,0.987872450225226,0.985208212468013,0.981969365050815,0.97803714097637,0.973270697887959,0.967504196950361,0.960544081174746,0.952166914855776,0.942118310955005,0.930113671708744,0.915841682158298,0.898971687312411,0.879166180385972,0.856099523844602,0.829483577479179,0.799099978113668,0.764837328151875,0.726729594445378,0.684989954946836,0.640032828652043],[0.995233358024793,0.994176667072368,0.992887398167564,0.991315182410314,0.989399144395613,0.987065906828702,0.98422731278283,0.980777875594604,0.976591998859776,0.971521059248775,0.965390518957753,0.957997338964015,0.949108104181507,0.9384584484788,0.925754573909434,0.910677870993883,0.892893816878735,0.872066373000165,0.847878903662214,0.820062047207214,0.788427863747004,0.752907923350523,0.713590953053653,0.670753692125612,0.624877467760432,0.576643556034668],[0.993786749018682,0.992411812295775,0.990735450872463,0.988692971753892,0.986206473174087,0.983182476265909,0.979509293821797,0.975054192663789,0.969660463421431,0.963144594723813,0.955293864223015,0.945864810914316,0.934583241064377,0.921146632006118,0.905230003593027,0.886496467424972,0.864613644168527,0.839276829107427,0.810239040003203,0.777346791060462,0.740578620733075,0.700081314163373,0.656196967874981,0.609473365081613,0.560651378897069,0.510626661449049],[0.991904685534114,0.990117406713036,0.987940331027964,0.985290783605813,0.982069687127942,0.978158855233692,0.973418109002463,0.967682354111663,0.960758849259057,0.952425023398505,0.94242736346264,0.930482091906796,0.916278567791277,0.899486537595746,0.879768462660963,0.856798051958483,0.830285693065782,0.800010559759469,0.76585770279875,0.727856484498417,0.686214648907743,0.641340790109185,0.59384784903001,0.544532256202645,0.494327560415421,0.444236998882634],[0.989458571110415,0.987138243271998,0.984315272353966,0.980884698043965,0.976721531220355,0.971677838764448,0.965579852025138,0.958225366690772,0.949381840699469,0.93878577268917,0.92614414926892,0.911138962235575,0.893435969003697,0.872698919328768,0.848610280030823,0.820898912668233,0.789374067169186,0.753963408864729,0.71475075689992,0.672007231698772,0.626208336379631,0.578029991745452,0.528319284978978,0.478040507574997,0.42820278611713,0.379780371748244],[0.986283549375306,0.983276163571513,0.979623019646881,0.975192018580769,0.969827167596678,0.963345747747216,0.955535887604295,0.946155002714522,0.934929747408276,0.921558337126858,0.905716305798599,0.887066906075975,0.865277346618829,0.840041760627625,0.81111106791282,0.778328618457756,0.741668702072126,0.70127292318823,0.657477627951011,0.610824847945311,0.562050411148162,0.512046348978192,0.461800012546593,0.412317947864768,0.36454661223409,0.319302879879023],[0.9821694611507,0.978279909951857,0.973564729231327,0.967859566979514,0.960972495807474,0.952681808394576,0.942734866122238,0.930848714298997,0.916713391697786,0.899999056012626,0.880368151424942,0.857493753682652,0.83108480383773,0.800918042409556,0.766874999516704,0.72898046057355,0.687436754135014,0.642646652534457,0.595217492818866,0.545941047183953,0.495747838225464,0.445640191113577,0.396613647116759,0.349579494603408,0.305300866987038,0.264351236054495],[0.976850363781619,0.971833780215191,0.965768186062515,0.958452210169231,0.949654182950244,0.939111468899183,0.92653184270061,0.911597904323981,0.893975702714411,0.873328792423241,0.849338764874406,0.821732732072573,0.790317164345227,0.755015852776757,0.71590773394762,0.673258323529457,0.62753729770717,0.579415198676639,0.529734915467672,0.479458359521764,0.429594480635006,0.381119585692433,0.334903017949546,0.291649789057711,0.251867319633947,0.21585773359826],[0.969992984141796,0.963545844451529,0.955776661410012,0.946443727019846,0.935274545454211,0.921968074768234,0.906200371169245,0.88763484123541,0.86593829990316,0.840803742149582,0.811980018421758,0.779307345496192,0.742755793979757,0.702461809963318,0.658755998374814,0.61217462990618,0.563448457291218,0.513465842184573,0.463212443052727,0.413695367513637,0.365863795861761,0.320539049442952,0.278364517796844,0.239780792274127,0.205025659942645,0.174154092225248],[0.961185026160777,0.95293727588552,0.943040825636926,0.931213546138307,0.917146161469061,0.900509250153221,0.880965253776968,0.858186634975665,0.831880913822221,0.801822427284683,0.767889215865915,0.730101515887568,0.688656259165053,0.643950399950035,0.596585655472606,0.547349102908038,0.497168184663099,0.447044250375148,0.397974131357215,0.350872459380845,0.30650723740539,0.26545762774972,0.228097432319399,0.194602257471101,0.164974480481325,0.139078536345634],[0.94992513719695,0.939435544006557,0.926917661595831,0.912054704894054,0.894513025503342,0.873955999091829,0.85006436361816,0.822563508635761,0.791257155398778,0.756065251301493,0.717061875912791,0.674506954645912,0.628864334436135,0.580799156132857,0.531150067713564,0.480876542463878,0.430987289010235,0.382460609971434,0.33616975596653,0.29282495528472,0.25293942716202,0.21682098436632,0.184585732902065,0.156187214920186,0.13145346194078,0.110125355206927],[0.935617642279915,0.922375852433924,0.906682207343288,0.88820028024122,0.866596510465412,0.841562778477846,0.812845893840351,0.780282971115313,0.743839891262233,0.703647964682934,0.660032064703022,0.613522692428129,0.564845495827143,0.514885118201464,0.464625464118839,0.415074138670389,0.367182988714728,0.321777742465865,0.279507275571357,0.240818012542557,0.205953269018532,0.174972769387287,0.147785161211049,0.124186134552889,0.103896093550481,0.0865933556268597],[0.917576884690779,0.901017127613706,0.881559776838128,0.85887670183854,0.832674027112767,0.802723715696939,0.768900349520451,0.731219643786506,0.689873152666747,0.645252016497974,0.597952317345445,0.548756401241419,0.498588576806544,0.44844915478797,0.399336193793282,0.352167617053457,0.307716263213678,0.266566972112384,0.22909934418548,0.195494304406647,0.165758666656422,0.139760231702461,0.117266332343716,0.0979803944399665,0.0815731672498703,0.0677071698623643],[0.89504794487365,0.874580546170969,0.850787081737179,0.823391245647763,0.792194040552615,0.757111600773721,0.718213174643311,0.675753112206633,0.630189429371739,0.582181843496346,0.532564719129271,0.482295033619064,0.432381190072958,0.383803426569779,0.337438854410201,0.294002891343823,0.254014548785775,0.217787339729241,0.185442436556447,0.1569374821376,0.132103517781506,0.110683381212716,0.0923668077486315,0.0768195434615386,0.0637055300070288,0.0527024315133289],[0.867251984784279,0.842318874474602,0.813708696561527,0.781255494361174,0.744920988850796,0.704831377674386,0.661305812618528,0.614869017077699,0.566241505320322,0.516304154176146,0.46603905329422,0.416454241038295,0.368504174052583,0.323018946628122,0.280652900150187,0.241858292103534,0.206883982744849,0.175794475835935,0.148502170997297,0.124805416527309,0.104426258825134,0.0870438042029807,0.0723211206627022,0.0599251937829756,0.0495404803482601,0.0408771294572566],[0.833464147868495,0.803621909049061,0.769908398267708,0.732334837745362,0.691087423441586,0.646551486440798,0.599317458883074,0.550162920098855,0.500008991731062,0.449854882419024,0.400699815150019,0.353464952247026,0.308927933610063,0.26767926300091,0.230104345021874,0.19638944334828,0.166545836908741,0.140444723315679,0.117855750701539,0.0984836904414585,0.0819998457774945,0.0680666957785229,0.0563556833435774,0.0465589107036522,0.0383958962822155,0.0316166160964374],[0.793127820127977,0.758154897647632,0.719361622118734,0.676996783500639,0.63151256543207,0.583563240228137,0.533978847159558,0.483713810185193,0.433776162584785,0.385148017365877,0.338710299343082,0.29518358795937,0.255092679807385,0.218756799047531,0.18630220791031,0.157690679855315,0.132756296889281,0.111243881358567,0.0928442364317717,0.0772234482302767,0.0640452668812178,0.0529868104256656,0.0437485257645035,0.0360596110266991,0.0296800995815401,0.0244006542286796],[0.745999081801267,0.706012039397944,0.662577227930908,0.616213585524953,0.567636464399903,0.517722927271374,0.467453188091758,0.4178356542384,0.369827335019897,0.324262649478853,0.281801383774014,0.242901627647076,0.207817801636523,0.176619215079313,0.1492220503819,0.12542734442336,0.104958812577025,0.0874963715039934,0.07270323611459,0.0602460676198067,0.0498086946761207,0.041100468271249,0.0338604766510464,0.0278587823706655,0.022895665347392,0.0187996421145299],[0.692299060423759,0.647848794162076,0.600681060623685,0.551568637444712,0.501429406510447,0.451261411282986,0.402064976057957,0.354764449465186,0.310142237659843,0.268794494145684,0.231112432839507,0.197287675876818,0.167335995525721,0.141132017309413,0.118447734134845,0.098989288010584,0.0824285557968979,0.0684279906595021,0.0566585959341657,0.0468117777216465,0.0386062241526186,0.0317910356593159,0.0261462185443107,0.02148145760981,0.0176338695156192,0.0144652432879473],[0.632833725648825,0.58494332586921,0.535392429282764,0.485132849341743,0.435172185240052,0.386494364132873,0.339984076700224,0.296367035722862,0.256173815405269,0.219729361577061,0.18716504951862,0.158446813048033,0.133411805810207,0.111806863028425,0.0933238791276337,0.0776292980882331,0.0643866909545033,0.0532726375339649,0.0439868334259793,0.0362576235699811,0.0298441651933272,0.02453627409235,0.0201528002935516,0.0165391683727382,0.0135645326292811,0.0111188484257278],[0.569030351761062,0.519141414666852,0.468867845989358,0.419218357810664,0.371152454646924,0.325508838436187,0.282952718552217,0.243948015744786,0.208754726111353,0.177446990553223,0.149944804937154,0.126051925131859,0.1054937623293,0.0879510651571516,0.0730872114469639,0.0605685489000287,0.0500782846178478,0.0413249747571475,0.0340468397157017,0.0280130707666628,0.0230231178197657,0.0189047345532664,0.0155113526388679,0.0127191829075117,0.0104243045105458,0.00853990156392484],[0.502849798218504,0.452668719343586,0.403431657054112,0.356066093089969,0.311359164295527,0.269912659148734,0.232123605537112,0.198189003483813,0.168129146730584,0.141822119767198,0.119042289806977,0.0994971947543059,0.0828593048819309,0.0687910617184841,0.056963038400432,0.0470659502961777,0.0388176576630112,0.0319663856805951,0.0262912788723795,0.0216012117016279,0.0177325629082968,0.0145464650865867,0.0119258789549021,0.00977271683975849,0.00800514864528494,0.00655515999200087],[0.436569236667077,0.387842448539514,0.341260172289594,0.297553225092888,0.257257950633671,0.220705026468437,0.188030963855155,0.159205886634175,0.134070051056758,0.112372333591301,0.0938057434770677,0.078037100521679,0.0647298092746322,0.0535599192800632,0.0442263791633208,0.0364566823271433,0.0300091096783768,0.0246726286740295,0.0202653008315894,0.0166318386622868,0.0136407669715031,0.0111814935253796,0.00916148062460032,0.00750362754520152,0.00614391778936467,0.00502934840033476],[0.372479515850318,0.326757500787486,0.284106896462683,0.244997452849348,0.209694756489334,0.178277805620433,0.15067044018677,0.126679165516533,0.106031115595259,0.0884078927925857,0.0734730540289337,0.0608926444886151,0.0503492563985588,0.041550654444092,0.0342341921499694,0.0281681888885206,0.0231512629668489,0.0190104030901513,0.015598355334859,0.0127907278842805,0.0104830779387547,0.00858814271724541,0.00703330387924214,0.00575832558988529,0.00471337482056773,0.0038573133062526],[0.312578702316924,0.271033751483425,0.233137860900655,0.19909342757086,0.16892529468163,0.14251503673136,0.119639424860267,0.100007418274347,0.0832921006125248,0.0691559161821281,0.0572690174105567,0.047321434429949,0.0390302021148005,0.0321426707726361,0.0264371221534362,0.0217216185747189,0.0178317986424822,0.0146281361733928,0.0119930158295626,0.00982785302688467,0.00805039355424113,0.0065922640612815,0.00539680174308447,0.00441716445054302,0.00361470643057517,0.0029575963866333]],"x":[0.0144823438022286,0.0525416156277061,0.0906008874531835,0.128660159278661,0.166719431104139,0.204778702929616,0.242837974755093,0.280897246580571,0.318956518406048,0.357015790231526,0.395075062057003,0.433134333882481,0.471193605707958,0.509252877533436,0.547312149358913,0.585371421184391,0.623430693009868,0.661489964835346,0.699549236660823,0.737608508486301,0.775667780311778,0.813727052137256,0.851786323962733,0.889845595788211,0.927904867613688,0.965964139439166],"y":[0.0227246168069541,0.0613890595827252,0.100053502358496,0.138717945134267,0.177382387910038,0.216046830685809,0.25471127346158,0.293375716237351,0.332040159013122,0.370704601788893,0.409369044564664,0.448033487340435,0.486697930116206,0.525362372891977,0.564026815667748,0.60269125844352,0.641355701219291,0.680020143995061,0.718684586770833,0.757349029546604,0.796013472322375,0.834677915098146,0.873342357873917,0.912006800649688,0.950671243425459,0.98933568620123],"type":"surface","opacity":0.9,"marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,1,0,1,0,0,0,1,0,1,1,0,0,0,0,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,1,1]}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>


---

# Árvore de Decisão

<div id="htmlwidget-cc688c1ba66a0354ce7e" style="width:576px;height:432px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-cc688c1ba66a0354ce7e">{"x":{"visdat":{"b8312a55db95":["function () ","plotlyVisDat"]},"cur_data":"b8312a55db95","attrs":{"b8312a55db95":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"color":{},"type":"scatter3d","mode":"markers","opacity":0.8,"inherit":true},"b8312a55db95.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":[[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758]],"x":[0.00121790007688105,0.0411548717040569,0.0810918433312327,0.121028814958408,0.160965786585584,0.20090275821276,0.240839729839936,0.280776701467112,0.320713673094287,0.360650644721463,0.400587616348639,0.440524587975815,0.480461559602991,0.520398531230167,0.560335502857342,0.600272474484518,0.640209446111694,0.68014641773887,0.720083389366046,0.760020360993221,0.799957332620397,0.839894304247573,0.879831275874749,0.919768247501925,0.9597052191291,0.999642190756276],"y":[0.00118390494026244,0.0410379503294826,0.0808919957187027,0.120746041107923,0.160600086497143,0.200454131886363,0.240308177275583,0.280162222664803,0.320016268054023,0.359870313443243,0.399724358832464,0.439578404221684,0.479432449610904,0.519286495000124,0.559140540389344,0.598994585778564,0.638848631167784,0.678702676557004,0.718556721946225,0.758410767335445,0.798264812724665,0.838118858113885,0.877972903503105,0.917826948892325,0.957680994281545,0.997535039670765],"type":"surface","opacity":0.9,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"tempo_de_relacionamento"},"yaxis":{"title":"idade"},"zaxis":{"title":"churn"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.606268297648057,0.93764197290875,0.264352067606524,0.380093919346109,0.807483389042318,0.978075725259259,0.957933716475964,0.762731856433675,0.509648534934968,0.0644767952617258,0.643572765169665,0.915908884257078,0.0952325807884336,0.295372802997008,0.76993169891648,0.255893525900319,0.517895726021379,0.67784993047826,0.147227819310501,0.700526044936851,0.957992534851655,0.828625058988109,0.119278803002089,0.240340991178527,0.743188487831503,0.315797621617094,0.356225434923545,0.914359879679978,0.274401541100815,0.433338072383776,0.521773493150249,0.126169137191027,0.956151891965419,0.760002784896642,0.136895708739758,0.930865071713924,0.386182860704139,0.0592230462934822,0.986357388785109,0.766906925244257],"y":[0.66135785379447,0.30567013588734,0.484029362676665,0.934828812023625,0.0997255311813205,0.390790378209203,0.764517988776788,0.416090066777542,0.20003786124289,0.690791246946901,0.284224114613608,0.96912070713006,0.318246088223532,0.744337392738089,0.144231370650232,0.644905534572899,0.539820816135034,0.981951316818595,0.216307386057451,0.444903702707961,0.0367656091693789,0.132529327413067,0.0801411345601082,0.210877123987302,0.788176701171324,0.714915234828368,0.624315836699679,0.387868418358266,0.122784226899967,0.44227483170107,0.663285796996206,0.421484453603625,0.280387507984415,0.609341783681884,0.777920745080337,0.699830879457295,0.304197408724576,0.750520760891959,0.394219596870244,0.246802219888195],"z":[1,0,1,0,1,0,0,0,1,1,0,0,1,1,1,0,1,0,0,1,0,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,1,1,1,1],"type":"scatter3d","mode":"markers","opacity":0.8,"marker":{"colorbar":{"title":"tempo_de_relacionamentoidade","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,0,1,0,1,0,0,0,1,1,1,0,1,0,1,1,0,0,1,0,1,1,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0],"line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,0,1,0,1,0,0,0,1,1,1,0,1,0,1,1,0,0,1,0,1,1,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0]}},"frame":null},{"colorbar":{"title":"tempo_de_relacionamentoidade","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"z":[[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306,0.520408163265306],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.868131868131868,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758],[0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.758620689655172,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.34020618556701,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758,0.157575757575758]],"x":[0.00121790007688105,0.0411548717040569,0.0810918433312327,0.121028814958408,0.160965786585584,0.20090275821276,0.240839729839936,0.280776701467112,0.320713673094287,0.360650644721463,0.400587616348639,0.440524587975815,0.480461559602991,0.520398531230167,0.560335502857342,0.600272474484518,0.640209446111694,0.68014641773887,0.720083389366046,0.760020360993221,0.799957332620397,0.839894304247573,0.879831275874749,0.919768247501925,0.9597052191291,0.999642190756276],"y":[0.00118390494026244,0.0410379503294826,0.0808919957187027,0.120746041107923,0.160600086497143,0.200454131886363,0.240308177275583,0.280162222664803,0.320016268054023,0.359870313443243,0.399724358832464,0.439578404221684,0.479432449610904,0.519286495000124,0.559140540389344,0.598994585778564,0.638848631167784,0.678702676557004,0.718556721946225,0.758410767335445,0.798264812724665,0.838118858113885,0.877972903503105,0.917826948892325,0.957680994281545,0.997535039670765],"type":"surface","opacity":0.9,"marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":1,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0,0,1,0,1,0,0,0,1,1,1,0,1,0,1,1,0,0,1,0,1,1,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0]}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>


---

# Regressão Logística - Custo

A **Métrica** que a regressão logística usa de **Função de Custo** chama-se *log-loss* (ou *Binary Cross-Entropy*):

`$$D = \frac{-1}{N}\sum[y_i \log\hat{y_i} + (1 - y_i )\log(1 - \hat{y_i})]$$`

Para cada linha da base de dados seria assim...

.pull-left[


`$$D_i = \begin{cases} \\ -\log(\hat{y}_i) &amp; \text{quando} \space y_i = 1 \\\\\\ -\log(1-\hat{y}_i) &amp; \text{quando} \space y_i = 0 \\ \!\end{cases}$$`

]

.pull-rigth[

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-18-1.png" height="280" style="display: block; margin: auto;" /&gt;

]


---

# Regressão Logística - Regularização

A **Métrica** que a regressão logística usa de **Função de Custo** chama-se *log-loss* (ou *Binary Cross-Entropy*):


`$$D = \frac{-1}{N}\sum[y_i \log\hat{y_i} + (1 - y_i )\log(1 - \hat{y_i})]$$`

Regularizar é analogo a Regressão Linear.

`$$D_{regularizado} = D + \color{red}{\lambda}\sum_{j = 1}^{p}|\beta_j|$$`

**PS1:** Se `\(\log\left(\frac{\hat{p_i}}{1-\hat{p_i}}\right) = \beta_0 + \beta_1x\)` então
`\(\hat{p_i} = \frac{1}{1 + e^{-(\beta_0 + \beta_1x)}}\)`.



---

# Regressão Logística - Predições

O "produto final" será um vetor de probabilidades estimadas.

.pull-left[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; pts excl &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; classe observada &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; prob &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; classe predita &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 167 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 0.79 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Spam &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 129 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 0.45 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Não Spam &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 299 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Spam &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 270 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 1.00 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Spam &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 187 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 0.89 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Spam &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;"&gt; 85 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; 0.12 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;font-weight: bold;color: purple !important;"&gt; Não Spam &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

.pull-right[

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-20-1.png" style="display: block; margin: auto;" /&gt;


]


---




# Matriz de Confusão

.pull-left[
&lt;table class="table table-bordered" style="font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Neg      &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Pos  &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Neg &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; TN &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; FN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Pos &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; FP &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; TP &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;br/&gt;

&lt;table class="table table-bordered" style="font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 50%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 410 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 52 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 465 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

$$
\begin{array}{lcc}
\mbox{accuracy}  &amp; = &amp; \frac{TP + TN}{TP + TN + FP + FN}\\\\
&amp;   &amp; \\\\
\mbox{precision} &amp; = &amp; \frac{TP}{TP + FP}\\\\
&amp;   &amp; \\\\
\mbox{recall/TPR}    &amp; = &amp; \frac{TP}{TP + FN} \\\\
&amp;   &amp; \\\\
\mbox{F1 score}       &amp; =&amp; \frac{2}{1/\mbox{precision} + 1/\mbox{recall}}\\\\
&amp;   &amp; \\\\
\mbox{FPR}    &amp; = &amp; \frac{FP}{FP + TN}
\end{array}
$$

]

---

# Nota de Corte (Threshold)

.pull-left[

&lt;table class="table table-bordered" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 10%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 195 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 530 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;table class="table table-bordered" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 25%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 332 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 130 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 510 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;table class="table table-bordered" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 50%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 410 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 52 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 465 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

.pull-right[

&lt;table class="table table-bordered" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 75%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 443 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 112 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 19 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 426 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;table class="table table-bordered" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: red !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="1"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;p &amp;gt; 90%&lt;/div&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: black !important;padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Não Spam &lt;/th&gt;
   &lt;th style="text-align:right;background-color: white !important;text-align: center;"&gt; Spam &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Não Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 456 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 171 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Spam &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 3in; "&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: white !important;text-align: center;width: 2in; "&gt; 367 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]


---


# Curva ROC

.pull-left[
&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-26-1.png" style="display: block; margin: auto;" /&gt;

[An introduction to ROC analysis](https://people.inf.elte.hu/kiss/11dwhdm/roc.pdf)

]

.pull-right[

&lt;br/&gt;

&lt;table class="table table-bordered" style="font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Neg      &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Pos  &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Neg &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; TN &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; FN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Pos &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; FP &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; TP &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


$$
\begin{array}{lcc}
\mbox{TPR}    &amp; = &amp; \frac{TP}{TP + FN} \\\\
&amp;   &amp; \\\\
\mbox{FPR}    &amp; = &amp; \frac{FP}{FP + TN}
\end{array}
$$

]



---

# Curva ROC - Métrica AUC

.pull-left[

&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-28-1.png" style="display: block; margin: auto;" /&gt;

[An introduction to ROC analysis](https://people.inf.elte.hu/kiss/11dwhdm/roc.pdf)

]

.pull-right[

&lt;br/&gt;

&lt;table class="table table-bordered" style="font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Neg      &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Pos  &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Neg &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; TN &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; FN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; Pos &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; FP &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; TP &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

$$
\mbox{AUC} = \mbox{Area Under The ROC Curve}
$$
]

**PS:** AUC varia de 0.5 a 1.0. O que significa se AUC for zero?



---

# Curva ROC - Playground


&lt;a href = "http://arogozhnikov.github.io/2015/10/05/roc-curve.html"&gt;
&lt;img src="static/img/roc_curve.gif" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;
&lt;/a&gt;


---

# Múltiplas Notas de Corte

.pull-left[

Risco por Segmentação

&lt;table class="table table-bordered" style="font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; padding-right: 4px; padding-left: 4px; background-color: white !important;" colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;Observado&lt;/div&gt;&lt;/th&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Predito &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Neg      &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt; Pos  &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt;  N  &lt;/th&gt;
   &lt;th style="text-align:left;background-color: white !important;text-align: center;"&gt;  Risco  &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; A (até 0,19) &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; 90 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 101 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 11% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; B (até 0,44) &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; 40 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 40% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; C (até 0,62) &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 99 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 60% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; font-weight: bold;"&gt; D (0,62 ou +) &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 3in; "&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;width: 2in; "&gt; 80 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 100 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;text-align: center;"&gt; 80% &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

.pull-right[

Usamos o `score` como preferirmos


```r
dados %&gt;%
  mutate(
    segmento = case_when(
      score &lt;  0.19 ~ "A",
      score &lt;  0.44 ~ "B",
      score &lt;  0.62 ~ "C",
      score &gt;= 0.62 ~ "D"))
```

]


&lt;img src="02-intro-classificacao_files/figure-html/unnamed-chunk-32-1.png" width="800" style="display: block; margin: auto;" /&gt;

---
class: middle, center

## Exemplo 05

---
class: middle, center

## Exercício 02
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
